% File tacl2018v2.tex
% Sep 20, 2018

% The English content of this file was modified from various *ACL instructions
% by Lillian Lee and Kristina Toutanova
%
% LaTeXery is mostly all adapted from acl2018.sty.

\documentclass[11pt,a4paper]{article}
\usepackage{times,latexsym}
\usepackage{url}
\usepackage[T1]{fontenc}

%% Package options:
%% Short version: "hyperref" and "submission" are the defaults.
%% More verbose version:
%% Most compact command to produce a submission version with hyperref enabled
%%    \usepackage[]{tacl2018v2}
%% Most compact command to produce a "camera-ready" version
\usepackage[acceptedWithA]{tacl2018v2}
%% Most compact command to produce a double-spaced copy-editor's version
%%    \usepackage[acceptedWithA,copyedit]{tacl2018v2}
%
%% If you need to disable hyperref in any of the above settings (see Section
%% "LaTeX files") in the TACL instructions), add ",nohyperref" in the square
%% brackets. (The comma is a delimiter in case there are multiple options specified.)

% \usepackage[]{tacl2018v2}




%%%% Material in this block is specific to generating TACL instructions
\usepackage{xspace,mfirstuc,tabulary}
\newcommand{\dateOfLastUpdate}{Sept. 20, 2018}
\newcommand{\styleFileVersion}{tacl2018v2}

\newcommand{\ex}[1]{{\sf #1}}

\newif\iftaclinstructions
\taclinstructionsfalse % AUTHORS: do NOT set this to true
\iftaclinstructions
\renewcommand{\confidential}{}
\renewcommand{\anonsubtext}{(No author info supplied here, for consistency with
TACL-submission anonymization requirements)}
\newcommand{\instr}
\fi



% Standard package includes
\usepackage{times}
\usepackage{latexsym}
\usepackage{amsmath}
% For proper rendering and hyphenation of words containing Latin characters (including in bib files)
\usepackage[T1]{fontenc}
% For Vietnamese characters
% \usepackage[T5]{fontenc}
% See https://www.latex-project.org/help/documentation/encguide.pdf for other character sets

% This assumes your files are encoded as UTF8
\usepackage[utf8]{inputenc}

% This is not strictly necessary, and may be commented out,
% but it will improve the layout of the manuscript,
% and will typically save some space.
\usepackage{microtype}

% If the title and author information does not fit in the area allocated, uncomment the following
%
%\setlength\titlebox{<dim>}
%
% and set <dim> to something 5cm or larger.

\usepackage{soul} % colors

% own packages
\usepackage{graphicx} % figures
% \usepackage{float}
\usepackage{subfig} % for subfloats
% \usepackage[caption=false]{subfig}
\usepackage{booktabs} % nice tables
\usepackage{multirow} % multi column
\usepackage{comment} % for commenting text
\usepackage{amssymb} % check mark
\usepackage{multicol}
\usepackage{dsfont} % math
\usepackage[shortlabels]{enumitem} % letters enumeration



%
\iftaclpubformat % this "if" is set by the choice of options
\newcommand{\taclpaper}{final version\xspace}
\newcommand{\taclpapers}{final versions\xspace}
\newcommand{\Taclpaper}{Final version\xspace}
\newcommand{\Taclpapers}{Final versions\xspace}
\newcommand{\TaclPapers}{Final Versions\xspace}
\else
\newcommand{\taclpaper}{submission\xspace}
\newcommand{\taclpapers}{{\taclpaper}s\xspace}
\newcommand{\Taclpaper}{Submission\xspace}
\newcommand{\Taclpapers}{{\Taclpaper}s\xspace}
\newcommand{\TaclPapers}{Submissions\xspace}
\fi

%%%% End TACL-instructions-specific macro block
%%%%

\definecolor{WildStrawberry}{HTML}{ffab91}
\definecolor{OrangeRed}{HTML}{ff7043}

\definecolor{LightBlue}{HTML}{98F5FF}


\DeclareRobustCommand{\hltrue}[1]{{\sethlcolor{LightBlue}\hl{#1}}}
\DeclareRobustCommand{\hlfalseo}[1]{{\sethlcolor{pink}\hl{#1}}}
\DeclareRobustCommand{\hlfalset}[1]{{\sethlcolor{WildStrawberry}\hl{#1}}}
\DeclareRobustCommand{\hlfalsetr}[1]{{\sethlcolor{OrangeRed}\hl{#1}}}


% \DeclareRobustCommand{\hlgray}[1]{{\sethlcolor{lightgray}\hl{#1}}}
\DeclareMathOperator*{\argmin}{argmin}
\DeclareMathOperator*{\argmax}{argmax}


\newcommand{\ye}[1]{\textcolor{purple}{Yanai: #1}}
\newcommand{\sr}[1]{\textcolor{blue}{Shauli: #1}}
\newcommand{\nk}[1]{\textcolor{brown}{Nora: #1}}
\newcommand{\ar}[1]{\textcolor{magenta}{Lasha: #1}}
\newcommand{\hs}[1]{\textcolor{orange}{Hinrich: #1}}
\newcommand{\yg}[1]{\textcolor{purple}{Yoav: #1}}
\newcommand{\am}[1]{\textcolor{red}{[Amit: #1]}}

\newcommand{\resource}{\textsc{ParaRel}\raisebox{-2pt}{\includegraphics[width=0.15in]{figures/horns}}}
% \newcommand{\resource}{\textsc{ParaRel}}

\newcommand{\subj}{\textit{X}}
\newcommand{\obj}{\textit{Y}}

\newcommand{\yenew}[1]{\textcolor{purple}{#1}}

\title{Measuring and Improving Consistency in Pretrained Language Models}


% Author information does not appear in the pdf unless the "acceptedWithA" option is given
% See tacl2018v2.sty for other ways to format author information
% \author{
%  Template Author\Thanks{The {\em actual} contributors to this instruction
%  document and corresponding template file are given in Section
%  \ref{sec:contributors}.} \\
%  Template Affiliation/Address Line 1 \\
%  Template Affiliation/Address Line 2 \\
%  Template Affiliation/Address Line 2 \\
%   {\sf template.email@sampledomain.com} \\
% }

 \author{Yanai Elazar\textsuperscript{1,2} \,
 Nora Kassner\textsuperscript{3} \,
 Shauli Ravfogel\textsuperscript{1,2} \, 
 Abhilasha Ravichander\textsuperscript{4} \, \\
 {\bf Eduard Hovy\textsuperscript{4}\, 
 \bf Hinrich Sch\"utze\textsuperscript{3}\, 
 Yoav Goldberg\textsuperscript{1,2}}\\
\textsuperscript{1}Computer Science Department, Bar Ilan University \\
\textsuperscript{2}Allen Institute for Artificial Intelligence \\
\textsuperscript{3}Center for Information and Language Processing (CIS), LMU Munich\\
\textsuperscript{4}Language Technologies Institute, Carnegie Mellon University \\
  {\tt  \{yanaiela,shauli.ravfogel,yoav.goldberg\}@gmail.com}\\
  {\tt kassner@cis.lmu.de} 
  {\tt \{aravicha,hovy\}@cs.cmu.edu} 
  }
 

\date{}

\newcounter{notecounter}
\newcommand{\enotesoff}{\long\gdef\enote##1##2{}}
\newcommand{\enoteson}{\long\gdef\enote##1##2{{
\stepcounter{notecounter}
{\large\bf
\hspace{1cm}\arabic{notecounter} $<<<$ ##1: ##2
$>>>$\hspace{1cm}}}}}
\enoteson
%\enotesoff

\begin{document}
\maketitle

\begin{abstract}
\input{01_abstract}
\end{abstract}


% \input{10_intro}
\input{10_intro_consistency}

\input{20_background}

\input{30_framework}

\input{40_RelGraph}

\input{50_setup}

\input{60_experiments}

% \input{60_experiments}

\input{70_analaysis}

\input{80_adding_consistency}

\input{90_discussion}

\input{100_conclusions}


\section*{Acknowledgements}
We would like to thank Tomer Wolfson, Ido Dagan, Amit Moryossef and Victoria Basmov for their helpful comments and discussions, and Alon Jacovi, Ori Shapira, Arie Cattan, Elron Bandel, Philipp Dufter, Masoud Jalili Sabet,  Marina Speranskaya, Antonis Maronikolakis, Aakanksha Naik, Aditya Potukuchi for the help with the annotations.
We also thank the anonymous reviewers and the action editor, George Foster, for their valuable suggestions.


Yanai Elazar is grateful to be supported by the PBC fellowship for outstanding PhD candidates in Data Science and the Google PhD fellowship.
This project has received funding from the Europoean Research Council (ERC) under the Europoean Union's Horizon 2020 research and innovation programme, grant agreement No. 802774 (iEXTRACT).
This work has been funded by the European Research Council (\#740516) and by the German Federal Ministry of Education
and Research (BMBF) under Grant No. 01IS18036A. The authors of this
work take full responsibility for its content. This research was also supported in part by grants from the National Science Foundation Secure and Trustworthy Computing program (CNS-1330596, CNS15-13957, CNS-1801316, CNS-1914486) and a DARPA Brandeis grant (FA8750-15-2-0277). The views and conclusions contained herein are those of the authors and should not be interpreted as necessarily representing the official policies or endorsements, either expressed or implied, of the NSF, DARPA, or the US Government.

\bibliography{custom}
\bibliographystyle{acl_natbib}

\appendix

\input{999_appendix}

\end{document}


